# Nginx Log Analyzer

## Описание

Проект **Nginx Log Analyzer** предназначен для анализа логов Nginx в стандартном формате `access.log`.  
Приложение выполняет три основных задания:

1. **Поиск топ IP-адресов**  
   Находит 10 IP-адресов с наибольшим количеством запросов.

2. **Агрегация по кодам ответа**  
   Подсчитывает количество запросов по HTTP-кодам ответа (200, 404, 501 и т.д.) и выводит статистику.

3. **Фильтрация по User-Agent**  
   Находит все запросы от определенного User-Agent (например, curl) и считает их количество.

---

# Руководство по запуску проекта Nginx Log Analyzer

## 1. Требования

Для запуска приложения необходимо:

* **Java 17**
  Скачать и установить можно здесь: [https://adoptium.net/temurin/releases/?version=17](https://adoptium.net/temurin/releases/?version=17)

* **Gradle**
  Скачать и установить можно здесь: [https://gradle.org/install/](https://gradle.org/install/)

Проверьте версии в терминале:

```bash
java -version
gradle -v
```

---

## 2. Распаковка проекта

1. Скачайте архив с проектом.
2. Распакуйте его в любую папку, например:

```
C:\Users\<ВашеИмя>\Projects\
```

---

## 3. Создание файла `access.log`

В папке проекта создайте файл `access.log` (например, рядом с корнем `nginx-log-analyzer\data\access.log`).
Создать файл app.properties можно следующей командой:
```
touch access.log
```
Пример содержимого файла с 20 записями:

```text
192.168.1.1 - - [10/Nov/2025:10:00:00 +0100] "GET /index.html HTTP/1.1" 200 1234 "-" "Mozilla/5.0"
192.168.1.2 - - [10/Nov/2025:10:00:01 +0100] "GET /api/user HTTP/1.1" 404 150 "-" "curl/7.68.0"
192.168.1.3 - - [10/Nov/2025:10:00:02 +0100] "POST /login HTTP/1.1" 200 234 "-" "Mozilla/5.0"
192.168.1.4 - - [10/Nov/2025:10:00:03 +0100] "GET /dashboard HTTP/1.1" 200 345 "-" "Mozilla/5.0"
192.168.1.5 - - [10/Nov/2025:10:00:04 +0100] "GET /api/data HTTP/1.1" 501 0 "-" "curl/7.68.0"
192.168.1.1 - - [10/Nov/2025:10:00:05 +0100] "GET /index.html HTTP/1.1" 200 1234 "-" "Mozilla/5.0"
192.168.1.2 - - [10/Nov/2025:10:00:06 +0100] "GET /api/user HTTP/1.1" 404 150 "-" "curl/7.68.0"
192.168.1.3 - - [10/Nov/2025:10:00:07 +0100] "POST /login HTTP/1.1" 200 234 "-" "Mozilla/5.0"
192.168.1.4 - - [10/Nov/2025:10:00:08 +0100] "GET /dashboard HTTP/1.1" 200 345 "-" "Mozilla/5.0"
192.168.1.5 - - [10/Nov/2025:10:00:09 +0100] "GET /api/data HTTP/1.1" 501 0 "-" "curl/7.68.0"
192.168.1.1 - - [10/Nov/2025:10:00:10 +0100] "GET /index.html HTTP/1.1" 200 1234 "-" "Mozilla/5.0"
192.168.1.2 - - [10/Nov/2025:10:00:11 +0100] "GET /api/user HTTP/1.1" 404 150 "-" "curl/7.68.0"
192.168.1.3 - - [10/Nov/2025:10:00:12 +0100] "POST /login HTTP/1.1" 200 234 "-" "Mozilla/5.0"
192.168.1.4 - - [10/Nov/2025:10:00:13 +0100] "GET /dashboard HTTP/1.1" 200 345 "-" "Mozilla/5.0"
192.168.1.5 - - [10/Nov/2025:10:00:14 +0100] "GET /api/data HTTP/1.1" 501 0 "-" "curl/7.68.0"
192.168.1.1 - - [10/Nov/2025:10:00:15 +0100] "GET /index.html HTTP/1.1" 200 1234 "-" "Mozilla/5.0"
192.168.1.2 - - [10/Nov/2025:10:00:16 +0100] "GET /api/user HTTP/1.1" 404 150 "-" "curl/7.68.0"
192.168.1.3 - - [10/Nov/2025:10:00:17 +0100] "POST /login HTTP/1.1" 200 234 "-" "Mozilla/5.0"
192.168.1.4 - - [10/Nov/2025:10:00:18 +0100] "GET /dashboard HTTP/1.1" 200 345 "-" "Mozilla/5.0"
192.168.1.5 - - [10/Nov/2025:10:00:19 +0100] "GET /api/data HTTP/1.1" 501 0 "-" "curl/7.68.0"
```

---

## 4. Создание файла `app.properties`

Создать файл app.properties можно следующей командой:
```
touch app.properties
```

В папке:

```
nginx-log-analyzer\NGINX\src\main\resources
```
создайте файл `app.properties` со следующим содержимым (не забудьте поменять путь к .log файлу справильным форматом Диск:/путь/):

```properties
# Путь к лог-файлу
log.file.path=./data/access.log

# Количество IP-адресов для топа
report.top.ip.count=10

# User-Agent для поиска
filter.user.agent=curl/7.68.0

# Тип вывода: STDOUT или FILE
output.target=STDOUT
```

---

## 5. Сборка и запуск

1. Откройте командную строку (Terminal / PowerShell / Bash) и перейдите в папку проекта:

```bash
cd путь\к\nginx-log-analyzer
```

2. Выполните команду сборки:

```bash
gradlew :NGINX:build
```

3. После успешной сборки выполните запуск приложения:

```bash
gradlew :NGINX:run
```

> На Linux используйте `./gradlew`.

После запуска программа прочитает `access.log`, подсчитает статистику по IP и кодам ответов, а также отфильтрует запросы по User-Agent, и выведет JSON-отчёт.
